services:
  function-registry:
    build:
      context: ./example_registry
      dockerfile: Dockerfile
    ports:
      - "9999:9999"
    environment:
      - FIRECRAWL_API_KEY=${FIRECRAWL_API_KEY}
      - TAVILY_API_KEY=${TAVILY_API_KEY}

  task-agent:
    build:
      context: ./task_agent
      dockerfile: Dockerfile
    ports:
      - "8501:8501"
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      # Connect to function-registry service within docker network
      - TOOL_REGISTRY_URL=http://function-registry:9999
    volumes:
      # Persist session data
      - ./task_agent/task_data:/app/task_data
